<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Search — DuckDuckGo</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle fill='%230b6ef6' cx='50' cy='50' r='50'/><text x='50' y='58' font-size='50' text-anchor='middle' fill='white' font-family='Arial'>D</text></svg>">
<style>
  :root{
    --bg:#ffffff;
    --muted:#6b7280;
    --accent:#0b6ef6;
    --input-border:rgba(0,0,0,0.12);
  }
  html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
  body{background:var(--bg);display:flex;align-items:center;justify-content:center;flex-direction:column;color:#111}
  .wrap{width:min(760px,92%);text-align:center}
  /* Logo */
  .logo{font-weight:700;font-size:56px;letter-spacing: -2px;margin-bottom:18px;display:flex;align-items:center;justify-content:center;gap:10px}
  .logo .dot{width:54px;height:54px;border-radius:12px;background:linear-gradient(180deg,var(--accent),#228be6);display:inline-flex;align-items:center;justify-content:center;color:white;font-weight:900;font-size:26px}
  .logo .title{font-size:36px}
  /* Search box */
  .searchbox{margin-top:8px;background:white;border-radius:24px;padding:12px 16px;box-shadow:0 2px 8px rgba(16,24,40,0.06);display:flex;align-items:center;gap:12px;border:1px solid var(--input-border)}
  .searchbox:focus-within{box-shadow:0 6px 24px rgba(11,110,246,0.12);border-color:rgba(11,110,246,0.18)}
  .search-icon{width:20px;height:20px;opacity:0.8}
  input[type="search"]{flex:1;border:none;outline:none;font-size:18px;padding:6px 4px}
  .kbd-hint{font-size:13px;color:var(--muted);margin-top:8px}
  /* Buttons */
  .buttons{margin-top:18px;display:flex;gap:12px;justify-content:center}
  button.btn{background:#f2f4f8;border:1px solid rgba(0,0,0,0.06);padding:10px 16px;border-radius:6px;font-weight:600;cursor:pointer}
  button.primary{background:var(--accent);color:white;border:none}
  button.ghost{background:transparent;border:1px solid rgba(0,0,0,0.06)}
  /* Preview panel */
  .preview{margin-top:22px;text-align:left;border-radius:10px;padding:14px;border:1px solid #eef2ff;background:#fbfdff;display:none;max-width:760px}
  .preview h3{margin:0 0 6px 0;font-size:16px}
  .preview p{margin:0;color:#111;line-height:1.4}
  .preview .meta{margin-top:8px;font-size:13px;color:var(--muted)}
  /* Footer */
  .footer{margin-top:40px;color:var(--muted);font-size:13px}
  /* Responsive */
  @media (max-width:520px){
    .logo .title{display:none}
    .searchbox{padding:10px}
    .preview{padding:12px}
  }
</style>
</head>
<body>
  <div class="wrap" role="main">
    <div class="logo" aria-hidden="false">
      <div class="dot">D</div>
      <div class="title">Search</div>
    </div>

    <form id="searchForm" class="searchbox" role="search" onsubmit="return handleSubmit(event)" autocomplete="off">
      <svg class="search-icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></circle></svg>
      <input id="q" name="q" type="search" placeholder="Search the web (DuckDuckGo)" aria-label="Search query" />
      <input id="openNew" type="checkbox" checked title="Open results in a new tab" style="display:none" />
    </form>

    <div class="buttons" role="toolbar" aria-label="Search actions">
      <button class="btn primary" onclick="doSearch()">Search</button>
      <button class="btn" id="previewBtn" onclick="doPreview()" title="Show a short answer without leaving the page">Preview</button>
      <button class="btn ghost" onclick="randomSafe()">Surprise me</button>
    </div>

    <div id="preview" class="preview" aria-live="polite" role="status">
      <h3 id="previewTitle"></h3>
      <p id="previewText"></p>
      <div class="meta" id="previewMeta"></div>
    </div>

    <div class="kbd-hint" aria-hidden="true">Tip: press <kbd>Enter</kbd> to search or <kbd>Shift+Enter</kbd> for preview.</div>

    <div class="footer">Privacy-focused search using DuckDuckGo • Your searches open on DuckDuckGo directly.</div>
  </div>

<script>
  // Open full DuckDuckGo results (redirect)
  function doSearch(){
    const q = document.getElementById('q').value.trim();
    if(!q) return;
    const url = 'https://duckduckgo.com/?q=' + encodeURIComponent(q);
    // open in same tab by default; if you want new tab set window.open
    window.location.href = url;
  }

  function handleSubmit(e){
    e.preventDefault();
    // Enter: normal search
    doSearch();
    return false;
  }

  // Allow Shift+Enter to preview (does not navigate)
  document.getElementById('q').addEventListener('keydown', (ev) => {
    if(ev.key === 'Enter' && ev.shiftKey){
      ev.preventDefault();
      doPreview();
    }
  });

  // DuckDuckGo Instant Answer JSONP (client-side)
  function doPreview(){
    const q = document.getElementById('q').value.trim();
    if(!q){ alert('Type a query first'); return; }
    showLoading();
    fetchInstantAnswerJSONP(q, renderPreview);
  }

  function showLoading(){
    const p = document.getElementById('preview');
    p.style.display = 'block';
    document.getElementById('previewTitle').textContent = 'Loading…';
    document.getElementById('previewText').textContent = '';
    document.getElementById('previewMeta').textContent = '';
  }

  function fetchInstantAnswerJSONP(query, cb){
    const cbName = 'ddg_cb_' + Date.now() + '_' + Math.floor(Math.random()*9999);
    window[cbName] = function(data){
      try { cb(null, data); } catch(err) { cb(err); }
      cleanup();
    };
    function cleanup(){
      try{ delete window[cbName]; }catch(e){}
      const s = document.getElementById(cbName);
      if(s) s.parentNode.removeChild(s);
    }
    const script = document.createElement('script');
    script.id = cbName;
    const api = 'https://api.duckduckgo.com/?q=' + encodeURIComponent(query) + '&format=json&pretty=0&callback=' + cbName;
    script.src = api;
    script.onerror = function(){ cb(new Error('JSONP request failed')); cleanup(); };
    document.body.appendChild(script);
  }

  function renderPreview(err, data){
    const titleEl = document.getElementById('previewTitle');
    const textEl  = document.getElementById('previewText');
    const metaEl   = document.getElementById('previewMeta');

    if(err || !data){
      titleEl.textContent = 'No preview';
      textEl.textContent = err ? err.message : 'No data available.';
      metaEl.textContent = '';
      return;
    }

    if(data.AbstractText){
      titleEl.textContent = data.Heading || 'Instant Answer';
      textEl.textContent = data.AbstractText;
      metaEl.innerHTML = data.AbstractURL ? `Source: <a href="${escapeHtml(data.AbstractURL)}" target="_blank" rel="noopener">${shorten(data.AbstractURL)}</a>` : '';
    } else if(data.Answer){
      titleEl.textContent = data.Heading || 'Answer';
      textEl.textContent = data.Answer;
      metaEl.textContent = data.Redirect ? ('Source: ' + data.Redirect) : '';
    } else if(data.RelatedTopics && data.RelatedTopics.length){
      titleEl.textContent = data.Heading || 'Related topics';
      // Find first few topics with text
      const rt = data.RelatedTopics.filter(t => t.Text).slice(0,3).map(t => t.Text);
      textEl.textContent = rt.join(' — ');
      metaEl.innerHTML = `See full results • <a href="https://duckduckgo.com/?q=${encodeURIComponent(document.getElementById('q').value.trim())}" target="_blank" rel="noopener">Open DuckDuckGo</a>`;
    } else if(data.Redirect){
      titleEl.textContent = 'Redirect';
      textEl.textContent = 'This query redirects to: ' + data.Redirect;
      metaEl.innerHTML = `<a href="${escapeHtml(data.Redirect)}" target="_blank" rel="noopener">Open redirect</a>`;
    } else {
      titleEl.textContent = 'No Instant Answer';
      textEl.textContent = 'No concise answer available.';
      metaEl.innerHTML = `<a href="https://duckduckgo.com/?q=${encodeURIComponent(document.getElementById('q').value.trim())}" target="_blank" rel="noopener">See full results</a>`;
    }
  }

  // Small helpers
  function escapeHtml(s){
    return s.replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]; });
  }
  function shorten(url){
    try{
      const u = new URL(url);
      return u.hostname.replace(/^www\./,'') + u.pathname.replace(/\/$/,'');
    } catch(e){
      return url;
    }
  }

  // "Surprise me" opens a safe curated public domain link or DDG random search
  function randomSafe(){
    const picks = [
      'https://archive.org/details/classiccinema',            // public domain movies
      'https://archive.org/details/software',                 // archival software / games
      'https://www.classicreload.com/',                       // legal classic games (site policies vary)
      'https://en.wikipedia.org/wiki/Special:Random'         // random article
    ];
    const url = picks[Math.floor(Math.random() * picks.length)];
    window.open(url, '_blank', 'noopener');
  }

  // Focus input on load
  window.addEventListener('load', () => {
    const q = document.getElementById('q');
    q.focus();
  });
</script>
</body>
</html>
